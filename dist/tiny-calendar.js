var e,t;!function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday"}(e||(e={})),function(e){e[e.January=0]="January",e[e.February=1]="February",e[e.March=2]="March",e[e.April=3]="April",e[e.May=4]="May",e[e.June=5]="June",e[e.July=6]="July",e[e.August=7]="August",e[e.September=8]="September",e[e.October=9]="October",e[e.November=10]="November",e[e.December=11]="December"}(t||(t={}));var n=function(t,n,a,r){if(void 0===t||void 0===n)throw new Error("Must provide a valid day of the week and number.");if(!s.isBetween(n,1,31)&&!s.isIntAndNum(n))throw new Error(n+" Not a valid day number. Must be 1-31.");this.__name=e[t],this.__number=n,this.__monthOfTheYear=a,this.__year=r},a={name:{configurable:!0},number:{configurable:!0},year:{configurable:!0},monthName:{configurable:!0},monthOfTheYear:{configurable:!0}};a.name.get=function(){return this.__name},a.number.get=function(){return this.__number},a.year.get=function(){return this.__year},a.monthName.get=function(){return t[this.__monthOfTheYear]},a.monthOfTheYear.get=function(){return this.__monthOfTheYear},n.prototype.toDate=function(){return new Date(this.monthName+" "+this.number+" "+this.year)},Object.defineProperties(n.prototype,a);var r=function(e,t){if(this.__days=[],void 0===t||void 0===e)throw new Error("Must provide a valid month name and year.");this.__monthOfTheYear=t,this.__year=e;for(var a=1;a<=31;a++){var r=new Date(this.name+" "+a+" "+e);if(s.isDate(r)&&r.getMonth()===this.__monthOfTheYear){var i=new n(r.getDay(),a,this.monthOfTheYear,this.year);this.__days.push(i)}}},i={name:{configurable:!0},days:{configurable:!0},year:{configurable:!0},monthOfTheYear:{configurable:!0},dayOfTheWeekStartsOn:{configurable:!0}};i.name.get=function(){return t[this.__monthOfTheYear]},i.days.get=function(){return this.__days},i.year.get=function(){return this.__year},i.monthOfTheYear.get=function(){return this.__monthOfTheYear},i.dayOfTheWeekStartsOn.get=function(){return this.__days[0].toDate().getDay()},Object.defineProperties(r.prototype,i);var o=function(e,t){this.container=e,this.container.innerHTML='<div class="tiny-calendar-wrap"><header><div class="title">Tiny Calendar</div><nav class="controls"><div class="action"><button class="btn btn-prev">&lt;</button></div><div class="action"><button class="btn btn-month">September</button></div><div class="action"><button class="btn btn-year">2020</button></div><div class="action"><button class="btn btn-next">&gt;</button></div></nav></header><section class="pick-months"><ul><template class="pick-month-template"><li><div>Jan</div></li></template></ul></section><section class="pick-years"><ul><template class="pick-year-template"><li class="year">xxxx</li></template></ul></section><section class="pick-days"><table class="cal-table" cellspacing="0"><thead class="days"><tr><template><td><div class="day-name">xxxx</div></td></template></tr></thead><tbody><tr><template class="pick-day-template"><td><div class="day"><div class="day-inner">xxxx</div></div></td></template></tr></tbody></table></section></div>',this.el=this.container.querySelector(".tiny-calendar-wrap"),this.calendar=t,this.templates={day:this.el.querySelector("template.pick-day-template"),month:this.el.querySelector("template.pick-month-template"),year:this.el.querySelector("template.pick-year-template")},this.styles=document.createElement("style"),this.styles.type="text/css",this.styles.innerHTML=".tiny-calendar-wrap { background-color: #ccc; padding: 0.125em; border-radius: 0.25em; overflow: hidden; box-shadow: 8px 8px 7px rgba(0, 0, 0, 0.07); font-family: sans-serif; } .tiny-calendar-wrap * { box-sizing: border-box; } .tiny-calendar-wrap header { height: 64px; } .tiny-calendar-wrap .title { padding: 0.35em 0; background-color: #111; color: #eee; text-align: center; } .tiny-calendar-wrap .controls { display: flex; } .tiny-calendar-wrap .controls .action { display: flex; flex: 1 1 auto; background-color: #333; } .tiny-calendar-wrap .controls .action .btn { border: none; background-color: #333; flex: 1 1 auto; padding: 0.5em; color: #eee; text-transform: uppercase; outline: none; font-size: 100%; line-height: 1.15; margin: 0; cursor: pointer; } .tiny-calendar-wrap .controls .action .btn:hover { background-color: #111; } .tiny-calendar-wrap .day { display: flex; justify-content: center; align-items: center; padding: 0.25em; color: #555; } .tiny-calendar-wrap .day.on.today{ background-color: #fff; } .tiny-calendar-wrap .day.on { background-color: #eee; cursor: pointer; } .tiny-calendar-wrap .day.on:hover { background-color: #fff; } .tiny-calendar-wrap .day.off { background-color: #dedede; } .tiny-calendar-wrap .cal-table { width: 100%; } .tiny-calendar-wrap .cal-table .days { background-color: #555; text-align: center; } .tiny-calendar-wrap .cal-table .day-name { padding: 0.25em 0.75em; color: #bbb; text-transform: uppercase; outline: 1px solid #444; } .tiny-calendar-wrap section.pick-months, .tiny-calendar-wrap section.pick-years { height: 0; overflow: hidden; transition: height 120ms; } .tiny-calendar-wrap section.pick-months.open, .tiny-calendar-wrap section.pick-years.open { height: calc(100% - 65px); } .tiny-calendar-wrap section.pick-months ul, .tiny-calendar-wrap section.pick-years ul { height: 100%; display: flex; flex-wrap: wrap; list-style: none; padding: 0; margin: 0; } .tiny-calendar-wrap section.pick-months ul li, .tiny-calendar-wrap section.pick-years ul li { background-color: #dedede; padding: 0.25em; flex: 0 0 25%; margin: 0; display: flex; justify-content: center; align-items: center; outline: 1px solid #bbb; text-transform: uppercase; transition: background-color 250ms; cursor: pointer; } .tiny-calendar-wrap section.pick-months ul li:hover, .tiny-calendar-wrap section.pick-years ul li:hover { background-color: #fff; }",this.el.appendChild(this.styles),this.btns={previous:this.el.querySelector(".btn-prev"),next:this.el.querySelector(".btn-next"),month:this.el.querySelector(".btn-month"),year:this.el.querySelector(".btn-year")},this.sections={pickMonths:this.el.querySelector("section.pick-months"),pickYears:this.el.querySelector("section.pick-years")},this.onClick=this.onClick.bind(this),this.el.addEventListener("click",this.onClick),this.render()};o.prototype.onClick=function(e){var t=e.target;t.classList.contains("day-inner")||t.classList.contains("day")?console.log(this.calendar.currentMonth.days[Number(t.dataset.dayIndex)]):t.classList.contains("btn")?t.classList.contains("btn-month")?this.toggleSection(this.sections.pickMonths):t.classList.contains("btn-year")?this.toggleSection(this.sections.pickYears):t.classList.contains("btn-prev")?this.onClickPrevNext("prev"):t.classList.contains("btn-next")&&this.onClickPrevNext("next"):t.classList.contains("year")?this.changeYear(+t.innerText):t.classList.contains("month")&&this.changeMonth(+t.dataset.monthIndex)},o.prototype.changeMonth=function(e){this.calendar.setMonth(e),this.toggleSection(this.sections.pickMonths),this.render()},o.prototype.changeYear=function(e){this.calendar.setYear(e),this.toggleSection(this.sections.pickYears),this.render()},o.prototype.toggleSection=function(e){this.el.querySelectorAll(".open").forEach(function(t){t!==e&&t.classList.remove("open")}),e.classList.toggle("open")},o.prototype.render=function(){this.el.querySelector(".cal-table thead tr").innerHTML="",this.el.querySelector(".cal-table tbody").innerHTML="",this.sections.pickYears.querySelector("ul").innerHTML="",this.sections.pickMonths.querySelector("ul").innerHTML="";for(var n=0;n<=6;n++){var a=document.createElement("td");a.classList.add("day-name"),a.innerHTML="<div>"+e[n].substr(0,1)+"</div>",this.el.querySelector("table thead tr").appendChild(a)}for(var r=this.sections.pickMonths.querySelector("ul"),i=0;i<12;i++){var o=document.createElement("li");o.innerText=t[i].slice(0,3),o.classList.add("month"),o.setAttribute("data-month-index",""+i),r.appendChild(o)}for(var s=this.calendar.year-12;s<this.calendar.year+12;s++){var c=document.importNode(this.templates.year.content,!0);c.querySelector("li").innerHTML=""+s,this.sections.pickYears.querySelector("ul").appendChild(c)}for(var l=this.calendar.currentMonth.dayOfTheWeekStartsOn,h=new Date,d=new Date(t[h.getMonth()]+" "+h.getDate()+" "+h.getFullYear()),u=0,y=0;u<6;u++){for(var p=document.createElement("tr"),m=0;m<7;m++){var f=this.calendar.currentMonth.days[y-l],b=document.importNode(this.templates.day.content,!0),g=b.querySelector(".day-inner"),v=b.querySelector(".day");g.innerHTML=""+(f?f.number:"&nbsp;"),v.classList.add(f?"on":"off"),f&&d.toString()===f.toDate().toString()&&v.classList.add("today"),g.setAttribute("data-day-index",f?""+(y-l):""),p.appendChild(b),y++}this.el.querySelector("table tbody").appendChild(p)}this.btns.month.innerHTML=""+this.calendar.currentMonth.name,this.btns.year.innerHTML=""+this.calendar.currentMonth.year,this.el.style.height=this.el.clientHeight+"px"},o.prototype.onClickPrevNext=function(e){"prev"===e?(this.calendar.previousMonth(),this.render()):"next"===e&&(this.calendar.nextMonth(),this.render())},o.prototype.onDestroy=function(){this.el.removeEventListener("click",this.onClick)};var s=function(e,n,a){this.__year=(new Date).getFullYear(),this.month=new r(this.__year,(new Date).getMonth()),a=a===t.January?a:void 0===a?this.month.monthOfTheYear:a,this.__year=n=n||this.__year,this.setMonth(a),this.view=null===e?null:new o(e,this)},c={year:{configurable:!0},currentMonth:{configurable:!0}};s.isDate=function(e){return e instanceof Date&&!isNaN(e.getDay())},s.isIntAndNum=function(e){return Number.isInteger(e)&&!Number.isNaN(e)},s.isBetween=function(e,t,n){return e>=t&&e<=n},c.year.get=function(){return this.__year},s.prototype.setYear=function(e){this.__year=e,this.setMonth(this.currentMonth.monthOfTheYear)},s.prototype.setMonth=function(e){this.month=new r(this.year,e)},c.currentMonth.get=function(){return this.month},s.prototype.nextMonth=function(){var e=this.month.monthOfTheYear+1;e>11&&(e=t.January,this.__year++),this.setMonth(e)},s.prototype.previousMonth=function(){var e=this.month.monthOfTheYear-1;e<0&&(e=t.December,this.__year--),this.setMonth(e)},Object.defineProperties(s.prototype,c),s.monthOfTheYear=t,s.dayOfTheWeek=e,module.exports=s;
//# sourceMappingURL=tiny-calendar.js.map
