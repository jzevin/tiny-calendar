{"version":3,"file":"tiny-calendar.js","sources":["../src/CalendarEnums.ts","../src/CalendarDay.ts","../src/CalendarMonth.ts","../src/CalendarView.ts","../src/Calendar.ts"],"sourcesContent":["export enum DayOfTheWeek {\n  Sunday,\n  Monday,\n  Tuesday,\n  Wednesday,\n  Thursday,\n  Friday,\n  Saturday,\n}\n\nexport enum MonthOfTheYear {\n  January,\n  February,\n  March,\n  April,\n  May,\n  June,\n  July,\n  August,\n  September,\n  October,\n  November,\n  December,\n}\n","import Calendar from './Calendar';\nimport { DayOfTheWeek, MonthOfTheYear } from './CalendarEnums';\n\nexport default class CalendarDay {\n  private __name: string;\n  private __number: number;\n  private __monthOfTheYear: MonthOfTheYear;\n  private __year: number\n  constructor(dow: DayOfTheWeek, num: number, monthOfTheYear: MonthOfTheYear, year: number) {\n    if (dow === undefined || num === undefined) {\n      throw new Error('Must provide a valid day of the week and number.');\n    }\n    if (!Calendar.isBetween(num, 1, 31) && !Calendar.isIntAndNum(num)) {\n      throw new Error(`${num} Not a valid day number. Must be 1-31.`);\n    }\n    this.__name = DayOfTheWeek[dow];\n    this.__number = num;\n    this.__monthOfTheYear = monthOfTheYear;\n    this.__year = year;\n  }\n\n  public get name(): string {\n    return this.__name;\n  }\n\n  public get number(): number {\n    return this.__number;\n  }\n\n  public get year(): number {\n    return this.__year;\n  }\n\n  public get monthName(): string {\n    return MonthOfTheYear[this.__monthOfTheYear];\n  }\n\n  public toDate(): Date {\n    return new Date( `${this.monthName} ${this.number} ${this.year}` );\n  }\n}\n","import Calendar from './Calendar';\nimport CalendarDay from './CalendarDay';\nimport { MonthOfTheYear, DayOfTheWeek } from './CalendarEnums';\n\nexport default class CalendarMonth {\n  private __monthOfTheYear: MonthOfTheYear;\n  private __days: CalendarDay[] = [];\n  private __year: number;\n\n  constructor(year: number, month: MonthOfTheYear) {\n    if (month === undefined || year === undefined) {\n      throw new Error('Must provide a valid month name and year.');\n    }\n    this.__monthOfTheYear = month;\n    this.__year = year;\n    for (let i = 1; i <= 31; i++) {\n      const date = new Date(`${this.name} ${i} ${year}`);\n      if (Calendar.isDate(date) && date.getMonth() === this.__monthOfTheYear) {\n        const day = new CalendarDay(date.getDay(), i, this.monthOfTheYear, this.year);\n        this.__days.push(day);\n      }\n    }\n  }\n\n  public get name(): string {\n    return MonthOfTheYear[this.__monthOfTheYear];\n  }\n\n  public get days() {\n    return this.__days;\n  }\n\n  public get year() {\n    return this.__year;\n  }\n\n  public get monthOfTheYear(): MonthOfTheYear {\n    return this.__monthOfTheYear;\n  }\n\n  public get dayOfTheWeekStartsOn(): DayOfTheWeek {\n    return this.__days[0].toDate().getDay();\n  }\n}\n","import Calendar from \"./Calendar\";\nimport { DayOfTheWeek } from \"./CalendarEnums\";\n\nconst html = `\n<div class=\"tc-wrap\">\n    <header>\n        <h1>Calendar!</h1>\n        <button class=\"prev-btn\">&lt; prev</button>\n        <button class=\"next-btn\">next &gt;</button>\n    </header>\n    <section>\n    </section>\n    <footer>\n        <p>Footer</p>\n    </footer>\n</div>\n<template class=\"day-template\">\n    <div class=\"day\">\n        <div class=\"day-number\"></div>\n    </div>\n</template>\n`;\n\ninterface ViewTemplate {\n    [key: string]: HTMLTemplateElement;\n}\n\nexport default class CalendarView {\n\n    private __calendar: Calendar;\n    private __styles: CSSStyleSheet;\n    private __prevBtn: HTMLButtonElement;\n    private __nextBtn: HTMLButtonElement;\n\n    public container: HTMLDivElement;\n    public el: HTMLElement;\n\n    constructor(el: HTMLElement, calendar: Calendar) {\n        this.container = document.createElement('div');\n        this.container.classList.add('tiny-cal-wrap');\n        this.container.innerHTML = html;\n        this.__calendar = calendar;\n        this.el = el;\n        this.el.appendChild(this.container);\n        //styles\n        const styleEl = document.createElement('style');\n        styleEl.type = 'text/css';\n        document.head.appendChild(styleEl);\n        this.__styles = <CSSStyleSheet>styleEl.sheet!;\n        this.__styles.insertRule('.tc-wrap * { box-sizing: border-box; }');\n        this.__styles.insertRule('.tc-wrap section { display: flex; flex-wrap: wrap; }');\n        this.__styles.insertRule('.tc-wrap section .day { flex: 0 0 14.286%; border:1px solid #ddd; padding: 0.25em; }');\n        this.__styles.insertRule('.tc-wrap section .day-name { flex: 0 0 14.286%; border:1px solid #ddd; padding: 0.25em; }');\n        //events\n        this.onClick = this.onClick.bind(this);\n        this.container.addEventListener('click', this.onClick);\n        this.__prevBtn = this.container.querySelector<HTMLButtonElement>('.prev-btn')!;\n        this.__nextBtn = this.container.querySelector<HTMLButtonElement>('.next-btn')!;\n        this.onClickPrevNext = this.onClickPrevNext.bind(this);\n        this.__prevBtn.addEventListener('click', this.onClickPrevNext);\n        this.__nextBtn.addEventListener('click', this.onClickPrevNext);\n        //render\n        this.render();\n    }\n    \n    private render() {\n        const temp = document.querySelector<HTMLTemplateElement>('.day-template');\n        this.container.querySelector('section')!.innerHTML = '';\n        for (let i = 0; i <= 6; i++) {\n            const el = document.createElement('div');\n            el.classList.add('day-name')\n            el.innerHTML = `<div>${DayOfTheWeek[i]}</div>`;\n            this.container.querySelector('section')!.appendChild(el);\n        }\n        const startsOn = this.__calendar.currentMonth.dayOfTheWeekStartsOn;\n        for (let i = 0; i < 42; i++) {\n            const day = this.__calendar.currentMonth.days[i-startsOn];\n            const clone = document.importNode(temp!.content, true);\n            clone.querySelector('.day-number')!.innerHTML = `${day ? day.number : '-'}`;\n            clone.querySelector('.day-number')!.setAttribute('data-day-index', day ? `${i-startsOn}` : '');\n            this.container.querySelector('section')!.appendChild(clone);\n        }\n    }\n\n    private onClick(e: MouseEvent) {\n        const t: HTMLElement = <HTMLTemplateElement>e.target;\n        if(t.classList.contains('day-number')) {\n            console.log(this.__calendar.currentMonth.days[Number(t.dataset['dayIndex'])]);\n        }\n    }\n\n    private onClickPrevNext(e: MouseEvent) {\n        const target: HTMLButtonElement = <HTMLButtonElement>e.target;\n        if (target.classList.contains('prev-btn')) {\n            console.log('prev');\n            this.__calendar.previousMonth();\n            this.render();\n        } else if (target.classList.contains('next-btn')) {\n            console.log('next');\n            this.__calendar.nextMonth();\n            this.render();\n        }\n    }\n\n    public onDestroy() {\n        this.container.removeEventListener('click', this.onClick);\n        this.__prevBtn.removeEventListener('click', this.onClickPrevNext);\n        this.__nextBtn.removeEventListener('click', this.onClickPrevNext);\n    }\n}","import { MonthOfTheYear, DayOfTheWeek } from './CalendarEnums';\nimport CalendarMonth from './CalendarMonth';\nimport CalendarView from './CalendarView';\n\nexport default class Calendar {\n\n  public static isDate(d: any): boolean {\n    return d instanceof Date && !isNaN(d.getDay());\n  }\n\n  public static isIntAndNum(num: any): boolean {\n    return Number.isInteger(num) && !Number.isNaN(num);\n  }\n\n  public static isBetween(num: number, min: number, max: number): boolean {\n    return num >= min && num <= max;\n  }\n\n  public static monthOfTheYear = MonthOfTheYear;\n   public static dayOfTheWeek = DayOfTheWeek;\n  \n  private __year: number = new Date().getFullYear();\n  private __month: CalendarMonth = new CalendarMonth(this.__year, new Date().getMonth());\n  private __view: CalendarView;\n\n  constructor(el: HTMLElement, year?: number, month?: MonthOfTheYear) {\n    year = year || this.__year;\n    month = month === MonthOfTheYear.January ? month : month === undefined ? this.__month.monthOfTheYear : month;\n    this.__year = year;\n    this.setMonth(month);\n    this.__view = new CalendarView(el, this);\n  }\n\n  public get year(): number {\n    return this.__year;\n  }\n\n  public setYear(year: number) {\n    this.__year = year;\n    this.setMonth(this.currentMonth.monthOfTheYear);\n  }\n\n  public setMonth(moty: MonthOfTheYear) {\n    this.__month = new CalendarMonth(this.year, moty);\n  }\n\n  public get currentMonth(): CalendarMonth {\n    return this.__month;\n  }\n\n  public nextMonth() {\n    let nextMonth = this.__month.monthOfTheYear + 1;\n    let year = this.__year;\n    if (nextMonth > 11) {\n      nextMonth = MonthOfTheYear.January;\n      this.__year++;\n    }\n    this.setMonth(nextMonth);\n  }\n\n  public previousMonth() {\n    let prevMonth = this.__month.monthOfTheYear - 1;\n    if (prevMonth < 0) {\n      prevMonth = MonthOfTheYear.December;\n      this.__year--;\n    }\n    this.setMonth(prevMonth);\n  }\n}"],"names":["DayOfTheWeek","MonthOfTheYear","CalendarDay","constructor","dow","num","monthOfTheYear","year","undefined","Error","Calendar","isBetween","isIntAndNum","__name","__number","__monthOfTheYear","__year","prototypeAccessors","name","this","number","monthName","toDate","Date","CalendarMonth","month","let","i","date","isDate","getMonth","day","getDay","__days","push","days","dayOfTheWeekStartsOn","const","CalendarView","el","calendar","container","document","createElement","classList","add","innerHTML","__calendar","appendChild","styleEl","type","head","__styles","sheet","insertRule","onClick","bind","addEventListener","__prevBtn","querySelector","__nextBtn","onClickPrevNext","render","temp","startsOn","currentMonth","clone","importNode","content","setAttribute","e","t","target","contains","log","Number","dataset","console","previousMonth","nextMonth","onDestroy","removeEventListener","getFullYear","January","__month","setMonth","__view","d","isNaN","isInteger","min","max","setYear","moty","prevMonth","December"],"mappings":"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"}